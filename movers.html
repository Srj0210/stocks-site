<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Top Movers - Stock Portal</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>tailwind.config = { darkMode: 'class' };</script>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-200">

  <!-- NAV -->
  <nav class="sticky top-0 bg-blue-900 dark:bg-gray-800 p-4 flex justify-between text-white">
    <a href="index.html" class="font-bold">← Back</a>
    <span>All Movers</span>
  </nav>

  <main class="max-w-6xl mx-auto px-4 py-6">
    <input id="searchBox" onkeyup="searchContent()" type="text"
      placeholder="Search movers..." class="w-full px-3 py-2 mb-4 rounded text-black" />

    <div id="moversList" class="grid sm:grid-cols-2 gap-4">⏳ Loading...</div>
  </main>

  <!-- Disclaimer -->
  <footer class="text-center text-xs text-gray-500 p-4">
    Disclaimer: This website and its data are for educational purposes only. 
    All rights reserved by respective owners.
  </footer>

  <script src="common.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", async () => {
      showLoader("moversList");
      try {
        const res = await fetch(API_URL);
        const data = await res.json();
        console.log("Movers Page Data:", data);

        paginate("moversList", data.movers || data["GainersLosers"], 
          m => {
            const change = parseFloat(m["Change%"] || 0);
            const cls = change > 0 
              ? "bg-green-900" 
              : change < 0 
              ? "bg-red-900" 
              : "bg-gray-700";
            return `<div class="searchable p-3 border rounded ${cls}">
                      <strong>${m.Name}</strong> 
                      <span>₹${m.CMP} (${change}%)</span>
                    </div>`;
          }, 
          12 // per page
        );
      } catch (e) {
        document.getElementById("moversList").innerHTML = 
          `<p class="text-center text-red-500">❌ Error loading movers</p>`;
      }
    });
  </script>
</body>
</html>