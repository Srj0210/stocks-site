<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Top Movers - srjahir.in</title>
  <link rel="icon" type="image/png" href="favicon.png" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="script.js" defer></script>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-200">

  <!-- NAV -->
  <nav class="sticky top-0 bg-blue-900 text-white shadow-md p-4 flex justify-between items-center">
    <a href="index.html" class="text-xl font-bold">â¬… Back</a>
    <h1 class="text-lg">ðŸ“ˆ All Movers</h1>
  </nav>

  <main class="max-w-6xl mx-auto px-4 py-6">
    <section class="bg-white dark:bg-gray-800 shadow rounded-lg p-4">
      <h2 class="text-xl font-bold mb-3">ðŸ“‹ Gainers & Losers Table</h2>
      <div class="overflow-x-auto">
        <table class="w-full border border-gray-300 dark:border-gray-600 text-sm">
          <thead class="bg-gray-200 dark:bg-gray-700">
            <tr>
              <th class="border px-2 py-1">Stock</th>
              <th class="border px-2 py-1">Type</th>
              <th class="border px-2 py-1">Change</th>
            </tr>
          </thead>
          <tbody id="moversTable">
            <!-- Data will load here -->
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <script>
    // Movers in table format
    async function renderMoversTable() {
      const container = document.getElementById("moversTable");
      if (!container) return;
      container.innerHTML = `<tr><td colspan="3">Loading...</td></tr>`;

      const res = await fetch("https://script.google.com/macros/s/AKfycbxaiHFAvUOfC5gnP49B0yDLXjD-FE-En-guZUFW8b7n4QptLPRKKiJ_u9l2QSKA1l1D/exec");
      const data = await res.json();

      container.innerHTML = (data.movers || [])
        .map(m => `
          <tr class="${m.Type?.toLowerCase().includes('gainer') ? 'bg-green-50 dark:bg-green-900' : 'bg-red-50 dark:bg-red-900'}">
            <td class="border px-2 py-1">${m.Stock}</td>
            <td class="border px-2 py-1">${m.Type}</td>
            <td class="border px-2 py-1">${m.Change}</td>
          </tr>
        `).join("");
    }

    document.addEventListener("DOMContentLoaded", renderMoversTable);
  </script>
</body>
</html>
